var Z=Object.defineProperty,z=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var R=(e,a,n)=>a in e?Z(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,_=(e,a)=>{for(var n in a||(a={}))H.call(a,n)&&R(e,n,a[n]);if(P)for(var n of P(a))B.call(a,n)&&R(e,n,a[n]);return e},D=(e,a)=>z(e,K(a));import{m as r,t as u,O as J,C as F,B as C,a as T,I as v,M as Q,P as Y,b as O,S as N,T as W,c as X,A as tt,d as et,e as rt,F as V,f as nt,g as q,h as M,U as at,D as st,i as ot,j as it,k as lt}from"./vendor.81ca64a8.js";const ct=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const g of c.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function n(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerpolicy&&(c.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?c.credentials="include":t.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(t){if(t.ep)return;t.ep=!0;const c=n(t);fetch(t.href,c)}};ct();const E=(e,a,n)=>{let s=[];if(typeof e=="string"?s=[...document.querySelectorAll(e)]:e&&e.__proto__===[].__proto__?s=e:e instanceof HTMLElement?s.push(e):s=e?Array.from(e):[],a&&n){const t=s.map(c=>c&&c.classList[a](n));return t.length==1?t[0]:t}else return s.length==0?null:s.length==1?s[0]:s};var $={exports:{}};(function(e){(function(){n.SKIP={},n.lift=I,n.scan=c,n.merge=t,n.combine=s,n.scanMerge=g,n["fantasy-land/of"]=n;var a=!1;Object.defineProperty(n,"HALT",{get:function(){return a||console.log("HALT is deprecated and has been renamed to SKIP"),a=!0,n.SKIP}});function n(i){var l=[],d=[];function o(f){return arguments.length&&f!==n.SKIP&&(i=f,p(o)&&(o._changing(),o._state="active",l.forEach(function(m,b){m(d[b](i))}))),i}o.constructor=n,o._state=arguments.length&&i!==n.SKIP?"active":"pending",o._parents=[],o._changing=function(){p(o)&&(o._state="changing"),l.forEach(function(f){f._changing()})},o._map=function(f,m){var b=m?n():n(f(i));return b._parents.push(o),l.push(b),d.push(f),b},o.map=function(f){return o._map(f,o._state!=="active")};var A;function h(){return A=n(),A.map(function(f){return f===!0&&(o._parents.forEach(function(m){m._unregisterChild(o)}),o._state="ended",o._parents.length=l.length=d.length=0),f}),A}return o.toJSON=function(){return i!=null&&typeof i.toJSON=="function"?i.toJSON():i},o["fantasy-land/map"]=o.map,o["fantasy-land/ap"]=function(f){return s(function(m,b){return m()(b())},[f,o])},o._unregisterChild=function(f){var m=l.indexOf(f);m!==-1&&(l.splice(m,1),d.splice(m,1))},Object.defineProperty(o,"end",{get:function(){return A||h()}}),o}function s(i,l){var d=l.every(function(m){if(m.constructor!==n)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");return m._state==="active"}),o=d?n(i.apply(null,l.concat([l]))):n(),A=[],h=l.map(function(m){return m._map(function(b){return A.push(m),(d||l.every(function(k){return k._state!=="pending"}))&&(d=!0,o(i.apply(null,l.concat([A]))),A=[]),b},!0)}),f=o.end.map(function(m){m===!0&&(h.forEach(function(b){b.end(!0)}),f.end(!0))});return o}function t(i){return s(function(){return i.map(function(l){return l()})},i)}function c(i,l,d){var o=d.map(function(A){var h=i(l,A);return h!==n.SKIP&&(l=h),h});return o(l),o}function g(i,l){var d=i.map(function(A){return A[0]}),o=s(function(){var A=arguments[arguments.length-1];return d.forEach(function(h,f){A.indexOf(h)>-1&&(l=i[f][1](l,h()))}),l},d);return o(l),o}function I(){var i=arguments[0],l=Array.prototype.slice.call(arguments,1);return t(l).map(function(d){return i.apply(void 0,d)})}function p(i){return i._state==="pending"||i._state==="active"||i._state==="changing"}e.exports=n})()})($);var S=$.exports;const w=e=>{const a=new Date;let n=a.getDate(),s=(a.getMonth()+1).toString();s.length<2&&(s="0".concat(s));const t=a.getFullYear();return e&&e=="dd/mm"?n.toString().length==2?`${n}/${s}`:`0${n}/${s}`:`${n}/${s}/${t} `},ut=e=>{const a=e.length;let n="";const s=16-a;for(let t=0;t<s;t++)n+=" ";return n},x=r("tag",{style:{position:"absolute",top:"50%","padding-left":"5px","font-weight":"bold","text-align":"center",color:"#979797",transform:"translate(0%, -50%)"}},"\u20AC"),pt=(e,a)=>{let n="",s=Object.keys(a).map(t=>t=="header"?(n="*",n):`${t}${ut(t)}${a[t]}`);return s.push(`
`,n),s.join(`
`)},dt=e=>{let a=S(""),n=S(0),s=[];const t=()=>{let p=S(0),i=S(""),l=S(0),d=S.merge([p,l]).map(o=>p()*l());s.push({qty:p,art:i,price:l,total:d})},c=p=>{let i=p||1,l=0,d=0;return s.map(o=>{l+=o.total(),d+=parseInt(o.qty())}),{price:(l/i).toFixed(2),pieces:d}},g=(p,i)=>{var o;const l=i.map(A=>{let{qty:h,art:f,total:m}=A;return h()<10&&h().toString().length<2&&h(parseInt("0".concat(h().toString()))),[h(),f(),`(${w("dd/mm")})`,"PR",(m()/e.attrs.store.iva).toFixed(2),"Ax (D=0)"]});return[p.newClient?pt(p.clients,p.newClient):(o=p.selectedClient)==null?void 0:o.header,l.map(A=>A.join("	")).join(`
`),`STATUS   PRONTO ${c(1).pieces} COLLI`,`NOTAFT   RELATIVA SCONTRINO ${n()} DEL ${w()}${localStorage.shop} EUR ${c(1).price} ${a()}`,`CAUSALE  RIF SCONTRINO ${n()} DEL ${w()}${localStorage.shop}

`].join(`
`)};let I={open:!1,content:"wait",style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:100}};return{oncreate:t,view(){return r(".tab",{class:e.attrs.active?"active":""},[r("h1",{class:u`text-xl font-bold mb-4`},"Inserisci Articoli"),r(J,{isOpen:I.open,content:r("",{style:I.style},[r(F,{class:u`mx-auto my-48`},[r("h1",{class:u`text-lg font-bold mb-6`},"Output"),r(".content",I.content),r(C,{label:"Close",onclick:()=>I.open=!1})])])}),r(T,{class:u`grid`,style:{"grid-template-columns":"70px 1fr 120px 120px"}},r("h1",{class:u`font-bold text-md ml-2`},"Qt\xE0"),r("h1",{class:u`font-bold text-md ml-2`},"Articolo"),r("h1",{class:u`font-bold text-md ml-2`},"Prezzo"),r("h1",{class:u`font-bold text-md ml-2`},"Totale")),s.map(({qty:p,art:i,price:l,total:d})=>r(ft,{qty:p,art:i,price:l,total:d})),r(".buttons",{class:u`mt-4 flex justify-end`},r(C,{label:r(v,{name:Q}),class:u`mr-2`,intent:"negative",onclick(){s.splice(-1,1)}}),r(C,{label:r(v,{name:Y}),class:u`mr-2`,intent:"primary",onclick:t})),r("h1",{class:u`font-bold text-sm ml-2 mt-6`},"Note Fatture"),r(T,{class:u`w-full `},r(O,{type:"text",fluid:!0,value:a(),oninput(p){a(p.target.value.toUpperCase())}})),r("h1",{class:u`font-bold text-sm ml-2 mt-6`},"Pagamento"),r(T,{class:u`w-full `},r(N,{options:["CARTA","CONTANTI","BONIFICO","ASSEGNO_CC","ASSEGNO_CIRCOLARE"],defaultValue:"",required:!0,value:e.attrs.store.inputs.PAGAMENTO,onchange(p){e.attrs.store.inputs.PAGAMENTO=p.target.value}})),r(T,{class:u`grid grid-cols-4 mt-8`},r("h1","# Scontrino"),r("h1","Imponibile"),r("h1","IVA"),r("h1","Totale Lordo")),r(T,{class:u`grid grid-cols-4`},r(O,{type:"number",min:0,id:"scontrino",name:"scontrino",value:n(),oninput(p){n(parseInt(p.target.value))}}),r(O,{contentLeft:x,disabled:!0,value:c(e.attrs.store.iva).price}),r(O,{disabled:!0,value:e.attrs.store.iva}),r(O,{contentLeft:x,disabled:!0,value:(parseFloat(c(e.attrs.store.iva).price)*e.attrs.store.iva).toFixed(2)})),r(".buttons",{class:u`mt-4 flex justify-end`},r(C,{label:"Copia Ordine",intent:"primary",class:u`mr-2`,onclick(){const p=E("textarea").value;navigator.clipboard.writeText(p)}})),r(T,{class:u`w-full h-full`},r(W,{class:u`w-full h-96`,style:{"font-family":"monospace"},placeholder:"Recap ordine",fluid:!0,value:g(e.attrs.store,s)}))])}}},ft=e=>({view(){return r(T,{class:u`grid`,style:{"grid-template-columns":"70px 1fr 120px 120px"}},r(O,{type:"number",min:"0",placeholder:"qty",oninput(a){e.attrs.qty(a.target.value)}}),r(O,{type:"text",placeholder:"articolo",value:e.attrs.art(),oninput(a){e.attrs.art(a.target.value.toUpperCase())}}),r(O,{class:"art-price",type:"number",min:"0.00",step:"0.01",oninput(a){e.attrs.price(a.target.value)},contentLeft:x}),r(O,{disabled:!0,contentLeft:x,value:e.attrs.total()}))}}),G=new X,L={notify({msg:e,intent:a}){G.show({message:e,intent:a,timeout:5e3,icon:a=="negative"?tt:a=="warning"?et:rt})}},y=({selector:e,req:a})=>{const n=E(`.input-${e} input`);a?n.setAttribute("required","true"):n.removeAttribute("required")},mt=(e,a,n)=>{let s=e.target.value;n(s);const t=document.querySelector(".iva_switch input");s=="DITTA INDIVIDUALE"?(t.checked=!1,t.disabled=!0,y({selector:"PIVA",req:!0}),y({selector:"PEC",req:!0}),L.notify({msg:`Le ditte indivuduali riportano:
        {NOME CLIENTE} o
      {NOME DI FANTASIA DITTA} di {NOME CLIENTE}.
        Il CF deve essere di 11 caratteri alfanumerici`,intent:"warning"})):s=="SOCIETA'"?(y({selector:"PEC",req:!0}),t.checked=!1,t.disabled=!0,L.notify({msg:`PIVA e' obbligatoria. Solitamente il CF e' uguale alla PIVA.
        In rari casi il CF puo' essere di 11 numeri`,intent:"warning"})):(y({selector:"PIVA",req:!1}),y({selector:"PEC",req:!1}),a.inputs.CODUNIVOCO="ESENTE",a.inputs.PIVA="",L.notify({msg:`CF e' obbligatorio.
        il CODUNIVOCO = ESENTE. Se ha diritto al 4% salvare le copie dei documenti`,intent:"warning"}))},gt=e=>{let a=!1,n=S(""),s={header:{info:"ES: MARIO ROSSI # LAZIO",props:{pattern:".*[^\\.]*#\\s+\\w+",required:!0}},PIVA:{info:"Codice a 11 numeri o vuoto nel caso di privati",props:{type:"tel",maxlength:11,pattern:"[0-9]{11}",required:!0}},CF:{info:"Per le socit\xE0 \xE8 spesso uguale a PIVA. Negli altri casi CF alfanumerico",props:{required:!0,pattern:"([A-Z]{6}[0-9]{2}[A-Z][0-9]{2}[A-Z][0-9]{3}[A-Z]|\\d{11})"}},INDIRIZZO:{info:"VIA G.ALBINI, 19 # 00152 # ROMA # RM # LAZIO",props:{required:!0,pattern:".*#\\s+[0-9]{5}\\s+#.*#\\s+\\w{2}\\s+#.*"}},CODUNIVOCO:{info:"Codice a 7 car alfanumerici o ESENTE",props:{required:!1,type:"text",maxlength:7,minlength:6,pattern:"(\\w{7}|esente|Esente|ESENTE)"}},PEC:{info:"Per la fattura elettronica serve o il CODUNIVOCO o la PEC",props:{required:!0,type:"text",pattern:"\\w*@.*\\.\\w*"}},EMAIL:{info:"Mail del richiedente fatture",props:{pattern:"\\w*@.*\\.\\w*"}},NOME:{info:"Nome e Cognome del richiedente fattura. Oppure ...",props:{required:!0,pattern:"..*"}},TEL:{info:"Tel del richiedente fattura",props:{type:"tel",required:!0,pattern:"..*"}},LISTINO:{options:["L4","L1","L2","L3"]},TRASPORTA:{options:["DESTINATARIO"]},PAGAMENTO:{options:["CARTA","CONTANTI","BONIFICO","ASSEGNO_CC","ASSEGNO_CIRCOLARE"]},START:{info:"GG/MM/AAAA ROMAEST",props:{pattern:"[0-9]{2}/[0-9]{2}/[0-9]{4}\\s\\w+"},default(){return w()+`${localStorage.shop||"ROMAEST"}`}}};return{view(){return r(".tab",{class:e.attrs.active?"active":""},[r("h1",{class:u`text-xl font-bold mb-4`},"Inserisci Cliente"),r(V,{onsubmit(){console.log("submitting")}},r(".col_wrap",{class:u`w-10/12 max-w-screen-sm`},r(T,{class:u`grid grid-cols-1 max-w-screen-sm`},r(".top_controls_wrapper",{class:u`flex justify-between align-center items-center`},r(nt,{label:"IVA al 4%",class:"iva_switch",disabled:n()!="PRIVATO",onchange(){a=!a,a?e.attrs.store.iva=1.04:e.attrs.store.iva=1.22,a?e.attrs.store.inputs.TIPO="TESTER":e.attrs.store.inputs.TIPO=void 0,L.notify({msg:`IVA settata a ${a?4:22}%`,intent:"warning"})}}),r(N,{required:!0,value:n(),options:["SOCIETA'","DITTA INDIVIDUALE","PRIVATO"],onchange(t){mt(t,e.attrs.store,n)}})),[Object.keys(e.attrs.store.inputs).map((t,c)=>{var g,I;return r(q,[r(M,{for:t},t),((g=s[t])==null?void 0:g.options)?[r("br"),r(N,{required:!0,options:s[t].options,class:`input-${t}`,id:t,name:t,value:e.attrs.store.inputs[t],onchange(p){const i=p.target.value;e.attrs.store.inputs[t]=i},oncreate(){s[t].value="",s[t].value=new Date().toString(),e.attrs.store.inputs[t]=s[t].options[0]}})]:r(O,D(_({placeholder:s[t].info,class:`input-${t}`,id:t,name:t,disabled:e.attrs.store.selectedClient,value:e.attrs.store.inputs[t]},(I=s[t])==null?void 0:I.props),{oncreate(){if(t="START"){const p=document.querySelector(`.input-${t}`),i=s[t].default();p.value=i,e.attrs.store.inputs[t]=i}},onchange(p){e.attrs.store.inputs[t]=p.target.value.toUpperCase(),t=="PIVA"?e.attrs.store.inputs.PIVA==="ESENTE"?E(".input-CF input").setAttribute("disabled",""):E(".input-CF input").removeAttribute("disabled",""):t=="CODUNIVOCO"&&e.attrs.store.inputs.CODUNIVOCO!=""&&y({selector:"PEC",req:!1})}}))])}),r(".button_wrap",{class:u`flex justify-evenly mt-4`},r(C,{label:"Pulisci",intent:"negative",onclick(){e.attrs.store.selectedClient=void 0,e.attrs.store.newClient=void 0;const t=e.attrs.store.inputs;for(let c in t)t[c]=""}}),r(C,{label:"Fill",onclick(){e.attrs.store.inputs.INDIRIZZO="V # 00152 # R # RM # L",e.attrs.store.inputs.PIVA="11111111111",e.attrs.store.inputs.header="a # m"}}),r(C,{type:"submit",label:"Conferma",intent:"primary",value:e.attrs.store.inputs,onclick(t){At(t,e,s)}}))])))])}}},At=(e,a,n)=>{var s;a.attrs.store.selectedClient||(a.attrs.store.newClient=a.attrs.store.inputs);for(let t in a.attrs.store.newClient){const c=a.attrs.store.newClient[t],g=t=="TIPO"?/(?:)/:new RegExp((s=n[t].props)==null?void 0:s.pattern);if(g&&g.toString()!=/(?:!)/.toString()){let I=g.test(c);if(!I){const p=E(`.input-${t} input`);if(I=!(p==null?void 0:p.hasAttribute("required")),p||(I=!0),!I)break}I?t==Object.keys(a.attrs.store.newClient).slice(-1)[0]&&(e.preventDefault(),U(1,a.attrs.store)):e.preventDefault()}}},It=e=>{let a={};return{view(){return r(".tab",{class:e.attrs.active?"active":""},[r("h1",{class:u`text-xl font-bold mb-4`},"Impostazioni"),r(V,{gutter:15,onsubmit(n){n.preventDefault();const s=n.target;Array.from(s.elements).forEach(c=>{const{name:g,value:I}=c;a[g]=I,localStorage[g]=a[g]}),location.reload()}},r(q,{span:{xs:12,sm:12,md:12}},[r(M,{for:"dataPath"},"Negozio"),r(T,{class:u`block`},r(N,{class:u`block w-48`,name:"shop",options:["GHERLINDA","ROMAEST","GLOBO","PORTE DI CATANIA","CASAMASSIMA","FIUMARA","CITTAFIERA"],value:localStorage.shop||"GHERLINDA"}))],r(C,{class:u`mt-8 float-right`,type:"submit",label:"Applica",intent:"primary"})))])}}},ht=e=>{let n={clients:[],inputs:{header:"",PIVA:"",INDIRIZZO:"",CODUNIVOCO:"",PEC:"",CF:"",EMAIL:"",NOME:"",TEL:"",LISTINO:"",TRASPORTA:"",PAGAMENTO:"",START:""},selectedClient:void 0,newClient:void 0,activeTab:0,iva:1.22};const s=[{tabView:gt,label:[r(v,{name:at}),""]},{tabView:dt,label:[r(v,{name:st}),""]},{tabView:It,label:[r(v,{name:ot}),r("","")]}];return{view(){return r(".app_root",{class:u`p-4`},r(F,{elevation:2,size:"lg",fluid:!0},r(it,{fluid:!0,size:"sm",class:u`mb-4 grid grid-cols-3`},[s.map((t,c)=>r(lt,{key:c,label:t.label,class:u`justify-center`,active:n.activeTab==c,onclick:()=>{U(c,n)}}))]),r(".flex",{class:u`overflow-hidden`},s.map((t,c)=>r(t.tabView,{active:n.activeTab===c,store:n}))),r(G,{clearOnEscapeKey:!1,position:"top"})))}}};function U(e,a){a.activeTab=e;const n=E(".tab");n&&(E(n,"remove","active"),E(n[e],"add","active"))}const j=document.querySelector("#app");j&&r.mount(j,ht);
